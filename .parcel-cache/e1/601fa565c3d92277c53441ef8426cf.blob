!function(){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function n(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,r(t,e,"get"))}function o(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,r(t,e,"set"),n),n}function r(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function i(e,n,o){return n=a(n),function(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(e,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(n,o||[],a(e).constructor):n.apply(e,o))}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,v(o.key),o)}}function d(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t,e,n){return(e=v(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,n||"default");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:String(n)}var h=function(){function t(e,n,o){l(this,t),f(this,"date",new Date),f(this,"id",(Date.now()+"").slice(-10)),this.coords=e,this.dist=n,this.duration=o}return d(t,[{key:"_setDesciption",value:function(){this.description="".concat(this.type[0].toUpperCase()).concat(this.type.slice(1)," on ").concat(["January","February","March","April","May","June","July","August","September","October","November","December"][this.date.getMonth()]," ").concat(this.date.getDate())}}]),t}(),_=function(t){function e(t,n,o,r){var a;return l(this,e),f(s(a=i(this,e,[t,n,o])),"type","running"),a.cadence=r,a.calcPace(),a._setDesciption(),a}return u(e,t),d(e,[{key:"calcPace",value:function(){return this.pace=this.duration/this.dist,this.pace}}]),e}(h),y=function(t){function e(t,n,o,r){var a;return l(this,e),f(s(a=i(this,e,[t,n,o])),"type","cycling"),a.elevationGain=r,a.calcSpeed(),a._setDesciption(),a}return u(e,t),d(e,[{key:"calcSpeed",value:function(){return this.speed=this.dist/(60*this.duration),this.speed}}]),e}(h),w=document.querySelector(".form"),m=document.querySelector(".workouts"),k=document.querySelector(".form__input--type"),b=document.querySelector(".form__input--distance"),g=document.querySelector(".form__input--duration"),S=document.querySelector(".form__input--cadence"),O=document.querySelector(".form__input--elevation"),P=new WeakMap,j=new WeakMap,M=new WeakMap,E=new WeakMap;new(function(){function t(){l(this,t),e(this,P,{writable:!0,value:void 0}),e(this,j,{writable:!0,value:13}),e(this,M,{writable:!0,value:void 0}),e(this,E,{writable:!0,value:[]}),this._getPositions(),this._getLocalStorage(),w.addEventListener("submit",this._newWorkout.bind(this)),k.addEventListener("change",this._toggleElevationField),m.addEventListener("click",this._moveToPopup.bind(this))}return d(t,[{key:"_getPositions",value:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(this._loadMap.bind(this),(function(){alert("Could not derive Coordinates")}))}},{key:"_loadMap",value:function(t){var e=this,r=[t.coords.latitude,t.coords.longitude];o(this,P,L.map("map").setView(r,n(this,j))),L.tileLayer("https://tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(n(this,P)),n(this,P).on("click",this._showForm.bind(this)),n(this,E).forEach((function(t){e._renderWorkoutMarker(t)}))}},{key:"_showForm",value:function(t){o(this,M,t),w.classList.remove("hidden"),b.focus()}},{key:"_hideMapForm",value:function(){b.value=g.value=S.value=O.value="",w.style.display="none",w.classList.add("hidden"),setTimeout((function(){return w.style.display="grid"}),1e3)}},{key:"_toggleElevationField",value:function(){O.closest(".form__row").classList.toggle("form__row--hidden"),S.closest(".form__row").classList.toggle("form__row--hidden")}},{key:"_newWorkout",value:function(t){var e=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.every((function(t){return Number.isFinite(t)}))},o=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.every((function(t){return t>0}))};t.preventDefault();var r,i=k.value,a=+b.value,s=+g.value,u=n(this,M).latlng,c=u.lat,l=u.lng;if("running"===i){var p=+S.value;if(!e(a,s,p)||!o(a,s,p))return alert("Inputs have to be positive numbers!");r=new _([c,l],a,s,p)}if("cycling"===i){var d=+O.value;if(!e(a,s,d)||!o(a,s))return alert("Inputs have to be positive numbers!");r=new y([c,l],a,s,d)}n(this,E).push(r),this._renderWorkoutMarker(r),this._renderWorkout(r),this._hideMapForm(),this._setLocalStorage()}},{key:"_renderWorkoutMarker",value:function(t){L.marker(t.coords).addTo(n(this,P)).bindPopup(L.popup({maxWidth:250,minWidth:100,autoClose:!1,closeOnClick:!1,className:"".concat(t.type,"-popup")})).setPopupContent("".concat("running"===t.type?"üèÉ‚Äç‚ôÇÔ∏è":"üö¥‚Äç‚ôÄÔ∏è"," ").concat(t.description)).openPopup()}},{key:"_renderWorkout",value:function(t){var e='<li class="workout workout--'.concat(t.type,'" data-id="').concat(t.id,'">\n          <h2 class="workout__title">').concat(t.description,'</h2>\n          <div class="workout__details">\n            <span class="workout__icon">').concat("running"===t.type?"üèÉ‚Äç‚ôÇÔ∏è":"üö¥‚Äç‚ôÄÔ∏è",'</span>\n            <span class="workout__value">').concat(t.dist,'</span>\n            <span class="workout__unit">km</span>\n          </div>\n          <div class="workout__details">\n            <span class="workout__icon">‚è±</span>\n            <span class="workout__value">').concat(t.duration,'</span>\n            <span class="workout__unit">min</span>\n          </div>');"running"===t.type&&(e+='<div class="workout__details">\n            <span class="workout__icon">‚ö°Ô∏è</span>\n            <span class="workout__value">'.concat(t.pace.toFixed(1),'</span>\n            <span class="workout__unit">min/km</span>\n          </div>\n          <div class="workout__details">\n            <span class="workout__icon">ü¶∂üèº</span>\n            <span class="workout__value">').concat(t.cadence,'</span>\n            <span class="workout__unit">spm</span>\n          </div>')),"cycling"===t.type&&(e+='<div class="workout__details">\n            <span class="workout__icon">‚ö°Ô∏è</span>\n            <span class="workout__value">'.concat(t.speed.toFixed(1),'</span>\n            <span class="workout__unit">km/h</span>\n          </div>\n          <div class="workout__details">\n            <span class="workout__icon">‚õ∞</span>\n            <span class="workout__value">').concat(t.elevationGain,'</span>\n            <span class="workout__unit">m</span>\n          </div>')),w.insertAdjacentHTML("afterend",e)}},{key:"_moveToPopup",value:function(t){var e=t.target.closest(".workout");if(e){var o=n(this,E).find((function(t){return t.id===e.dataset.id}));n(this,P).setView(o.coords,n(this,j),{animate:!0,pan:{duration:1}})}}},{key:"_setLocalStorage",value:function(){localStorage.setItem("workouts",JSON.stringify(n(this,E)))}},{key:"_getLocalStorage",value:function(){var t=this,e=JSON.parse(localStorage.getItem("workouts"));e&&(o(this,E,e),n(this,E).forEach((function(e){t._renderWorkout(e)})))}},{key:"reset",value:function(){localStorage.removeItem("workouts"),location.reload()}}]),t}())}();
//# sourceMappingURL=script.HASH_REF_55381ce1529f332ef7d7b2562e15696e.js.map
